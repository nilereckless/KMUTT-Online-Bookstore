<!DOCTYPE html>
<html lang="en">

<head>
    <title>KMUTT Bookstore management</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>

    <body class="container" style="margin-top: 50px;">
        <h1 class="text-center">Staff Management</h1> <br>
        <% if(messages.error) { %>
            <div class="alert alert-danger" role="alert">
                <%= messages.error %>
            </div>
            <% } %>
                <div class="back">
                    <a href="/books" class="btn btn-info">Back</a>
                </div>
                <br>
                <div class="card">
                    <div class="card-header">
                        Edit Book
                    </div>
                    <div class="card-body">
                        <form action="/books/update/<%= id %> " method="post" enctype="multipart/form-data">
                            <div class="form-group">
                                <label>BookName:</label>
                                <input type="text" class="form-control" name="name" value="<%= name %>"
                                    autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label>Author:</label>
                                <input type="text" class="form-control" name="author" value="<%= author %>"
                                    autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label>Price:</label>
                                <input type="text" class="form-control" name="price" id="price" value="<%= price %>"
                                    autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label>Stock:</label>
                                <input type="text" class="form-control" name="stock" id="stock" value="<%= stock %>"
                                    autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label>Isbn:</label>
                                <input type="text" class="form-control" name="isbn" id="isbn" value="<%= isbn %>"
                                    autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label>Upload Book Picture:</label>
                                <input type="file" name="book_pic" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label>Catagory:</label>
                                <select name="catagory" id="catagory">
                                    <option value="Education">Education</option>
                                    <option value="Information Technology">Information Technology</option>
                                    <option value="Fantasy">Fantasy</option>
                                    <option value="Other...">Other...</option>
                                </select>
                                <!-- <input type="text" class="form-control" name="catagory" value="<%= catagory %> " autocomplete="off"> -->
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-info" value="Update">
                            </div>
                        </form>
                    </div>
                </div>

    </body>
    <% include ../layouts/footer.ejs %>
        <script>
            (function ($) {
                $.fn.inputFilter = function (inputFilter) {
                    return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
                        if (inputFilter(this.value)) {
                            this.oldValue = this.value;
                            this.oldSelectionStart = this.selectionStart;
                            this.oldSelectionEnd = this.selectionEnd;
                        } else if (this.hasOwnProperty("oldValue")) {
                            this.value = this.oldValue;
                            this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                        } else {
                            this.value = "";
                        }
                    });
                };
            }(jQuery));
            $("#stock, #price").inputFilter(function (value) {
                return /^\d*$/.test(value);    // Allow digits only, using a RegExp
            });

        </script>

</html>